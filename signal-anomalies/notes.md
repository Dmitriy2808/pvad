# Аномалии в "простых" данных

## Введение

Исходный код примеров - **example.py**. Синтезированные сигналы,
иллюстрирующие некоторые проблемы, встречающиеся в измерительных
сигналах.

При работе с данными "вслепую" получаем большие проблемы даже при
маленьких аномалиях.

Данные могут сопровождаться положительным признаком
достоверности. Аномалии - результат ошибок программирования,
неправильного подключения, настройки, поломок, износа и т.п.

Вспомогательный код:

```
import matplotlib.pyplot as plt
import numpy as np
import scipy.signal as sig


DT, FS = 0.02, 50
FILTER_LEN = 301


def synth():
	"""Return test signal."""
	freqs = [0.25, 3]
	amps = [1, 0.05]
	ts = np.arange(0, 60, DT)
	xs = amps[0] * np.cos(2*np.pi*freqs[0]*ts) + 50
	xs += amps[1] * np.cos(2*np.pi*freqs[1]*ts) + 50
	return xs, ts


def filt(xs, fband, ntaps=301):
	"""Filters signal."""
	h = sig.firwin(cutoff=fband, pass_zero=False, fs=FS, numtaps=ntaps)
	return sig.lfilter(h, [1], xs)


def run(func):
	"""Runs example with single figure output."""
	fig = plt.figure()
	func()
	plt.tight_layout()
	plt.savefig("{}.png".format(func.__name__))
	plt.close(fig)
```

Разберем его. Здесь

```
import matplotlib.pyplot as plt
import numpy as np
import scipy.signal as sig
```

импортируются библиотеки для рисования графиков, работы с массивами и
цифровой обработки сигналов.

Функция `synth` возвращает сигнал, представляющий собой сумму двух
гармонических составляющих с частотами 0.25 Гц и 3 Гц. Амплитуды
(размах) гармоник соответственно равны 1 и 0.05. Т.е. у
высокочастотной составляющей амплитуда намного меньше.

## Скачок

Мы иногда встречаемся с такой ситуацией. Пример про "резонанс".

Скачок и фильтрация.

![Скачок](./ex_jumps.png)

Описание рисунка.

Код:

## Пропуск

## Повторяющиеся скачки

## Пропадание сигнала

## Константное значение

В заданном диапазоне

## Неадекватные значения

## Странная динамика

## Слишком много отличий

Температура

## Угол в кольце

Скачки

## Единицы измерения

Градусы или радианы, полная фаза

## Задания

* Почитайте о показателях
* Найти другие примеры аномалий в исходных данных, предложить подход к
  их распознаванию.

## Ссылки

* TODO: фильтрация
* [Показатели
  вариации](http://edu.tltsu.ru/sites/sites_content/site216/html/media96435/lec_5.pdf)
* [Вариация
(статистика)](https://ru.wikipedia.org/wiki/%D0%92%D0%B0%D1%80%D0%B8%D0%B0%D1%86%D0%B8%D1%8F_(%D1%81%D1%82%D0%B0%D1%82%D0%B8%D1%81%D1%82%D0%B8%D0%BA%D0%B0))
* [Coefficient of
  variation](https://en.wikipedia.org/wiki/Coefficient_of_variation)
